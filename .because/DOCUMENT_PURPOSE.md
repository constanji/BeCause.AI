# BeCause 文档用途说明

本文档说明 `.because/` 目录下各文档的实际用途和受众。

## 文档分类

### 智能体使用的文档（运行时）

这些文档是智能体在运行时实际使用的：

1. **WORKFLOW.md** ✅
   - **用途**：定义强制执行流程
   - **使用方式**：工作流指令会嵌入到系统提示（System Prompt）中
   - **受众**：智能体（通过系统提示）
   - **说明**：虽然智能体可能不直接读取文件，但工作流内容会通过 `main_agent_system_prompt.txt` 等方式嵌入

2. **commands/*.md** ✅
   - **用途**：命令模板，定义每个命令的执行步骤
   - **使用方式**：工具返回给智能体，智能体按照模板执行
   - **受众**：智能体（工具返回）
   - **说明**：这是智能体执行任务的核心依据

3. **templates/prompt-templates/*.txt** ✅
   - **用途**：提示词模板（Jinja2 格式）
   - **使用方式**：工具返回给智能体，智能体使用模板生成提示词
   - **受众**：智能体（工具返回）
   - **说明**：用于生成最终的 LLM 提示词

4. **templates/guides/*.md** ⚠️（按需）
   - **用途**：指南文档（SQL规则、语义模型使用等）
   - **使用方式**：可能作为上下文信息加载
   - **受众**：智能体（如果系统需要）
   - **说明**：不是必需的，但可能作为参考信息

### 人类使用的文档（开发/参考）

这些文档是给人类开发者、集成者或用户看的：

1. **README.md** 👤
   - **用途**：系统概述、RAG 服务集成说明、目录结构
   - **受众**：人类开发者、集成者
   - **说明**：帮助理解整个系统

2. **TOOL_USAGE.md** 👤
   - **用途**：工具的使用方法、参数说明、工作原理
   - **受众**：人类开发者、集成者
   - **说明**：说明工具如何工作，如何集成，但不被智能体运行时使用

3. **USAGE_GUIDE.md** 👤
   - **用途**：详细的使用指南（主要是"手动使用模板"的方式）
   - **受众**：人类用户、开发者
   - **说明**：教人如何手动使用模板系统，但智能体不需要手动操作

4. **templates/variable-system/*.md** 👤
   - **用途**：变量系统参考手册和示例
   - **受众**：人类开发者
   - **说明**：帮助理解变量系统，但智能体通过命令模板了解变量

## 关键发现

### ✅ 智能体实际使用的文档

智能体通过以下方式获取信息：

1. **系统提示（System Prompt）**
   - 包含工作流指令（来自 WORKFLOW.md 的内容）
   - 例如：`main_agent_system_prompt.txt` 中包含了完整的执行流程

2. **工具返回的命令模板**
   - 调用 `because` 工具后，返回 `commands/*.md` 的内容
   - 智能体按照命令模板执行步骤

3. **工具返回的提示词模板**
   - 调用 `because` 工具后，返回 `templates/prompt-templates/*.txt` 的内容
   - 智能体使用模板生成提示词

### ❌ 智能体不使用的文档

以下文档智能体在运行时**不需要读取**：

1. **USAGE_GUIDE.md**
   - 这是"手动使用模板"的指南
   - 智能体不需要手动操作，它通过工具调用自动完成

2. **TOOL_USAGE.md**
   - 这是给开发者看的工具说明文档
   - 智能体通过系统提示和工具返回的内容了解如何工作

3. **README.md**
   - 系统概述文档，人类参考用
   - 智能体不需要了解系统概述

## 文档使用流程

### 智能体的执行流程

```
用户输入
    ↓
智能体调用 because 工具
    ↓
工具返回：
  - command_template (commands/*.md 的内容)
  - prompt_templates (templates/prompt-templates/*.txt)
  - instructions (执行指令)
    ↓
智能体按照系统提示（包含 WORKFLOW.md 的流程）执行
    ↓
使用命令模板和提示词模板完成任务
```

**注意**：智能体在这个过程中**不需要读取** USAGE_GUIDE.md 或 TOOL_USAGE.md

### 人类开发者的使用流程

```
开发者需要集成/理解系统
    ↓
阅读 README.md（了解系统概述）
    ↓
阅读 TOOL_USAGE.md（了解工具如何使用）
    ↓
阅读 USAGE_GUIDE.md（了解详细使用方式）
    ↓
查看 commands/*.md 和 templates/（了解模板结构）
    ↓
集成到系统中
```

## 建议

### 文档组织建议

可以考虑将文档分为两类：

1. **运行时文档**（智能体使用）
   - WORKFLOW.md
   - commands/
   - templates/prompt-templates/

2. **参考文档**（人类使用）
   - README.md
   - TOOL_USAGE.md
   - USAGE_GUIDE.md
   - templates/guides/
   - templates/variable-system/

### 文档说明建议

可以在文档开头明确标注：

- **USAGE_GUIDE.md**：标注"本文档适用于手动使用模板的场景，智能体不需要读取"
- **TOOL_USAGE.md**：标注"本文档是开发者参考文档，说明工具的工作原理和集成方法"

## 总结

| 文档 | 智能体使用？ | 人类使用？ | 主要用途 |
|------|------------|-----------|---------|
| WORKFLOW.md | ✅（通过系统提示） | ✅ | 定义执行流程 |
| commands/*.md | ✅（工具返回） | ✅ | 命令模板 |
| templates/prompt-templates/* | ✅（工具返回） | ✅ | 提示词模板 |
| README.md | ❌ | ✅ | 系统概述 |
| TOOL_USAGE.md | ❌ | ✅ | 工具使用说明 |
| USAGE_GUIDE.md | ❌ | ✅ | 手动使用指南 |

**结论**：
- **USAGE_GUIDE.md** 和 **TOOL_USAGE.md** 主要是给人类开发者/用户看的
- 智能体通过系统提示、工具返回的命令模板和提示词模板来工作
- 智能体在运行时不需要读取这两个文档

---

**最后更新**：2025-01-27

